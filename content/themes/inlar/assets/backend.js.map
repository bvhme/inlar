{"version":3,"sources":["countries.js","map.js"],"names":["$","on","e","url","location","origin","country","this","val","attr","jQuery","maputils","prototype","init_admin","input","length","center","get_coords","baselayer","L","tileLayer","window","mapconfig","template","all","attribution","subdomains","maxZoom","minZoom","map","layers","scrollWheelZoom","zoom","_this","marker","draggable","addTo","prop","update_coords","target","_latlng","value","coords","latlng_to_str","setLatLng","str_to_latlng","console","log","load"],"mappings":"AAAA,cACA,SAAAA,GACAA,EAAA,gBAAA,qBAAAC,GAAA,SAAA,SAAAC,GACA,GAAAC,GAAAC,SAAAC,OAAA,4CACAC,EAAAN,EAAAO,MAAAC,KAEAR,GAAA,iBAAAS,KAAA,MAAAN,EAAA,IAAAG,EAAA,WAEAI,QCNAC,SAAAC,UAAAC,WAAA,WAIA,GAHAN,KAAAO,MAAAJ,OAAA,eAGAH,KAAAO,MAAAC,OAAA,CAGAR,KAAAS,OAAAT,KAAAU,aAGAV,KAAAW,UAAAC,EAAAC,UAAAC,OAAAC,UAAAC,SAAAC,KACAC,YAAAJ,OAAAC,UAAAG,YACAC,WAAA,OACAC,QAAA,GACAC,QAAA,IAIArB,KAAAsB,IAAAV,EAAAU,IAAA,OACAC,QAAAvB,KAAAW,WACAa,iBAAA,EACAf,OAAAT,KAAAS,OACAgB,KAAA,GAGA,IAAAC,GAAA1B,IAGAA,MAAA2B,OAAAf,EAAAe,OAAA3B,KAAAS,QACAmB,WAAA,IACAC,MAAA7B,KAAAsB,KAAA5B,GAAA,YAAA,SAAAC,GACA+B,EAAAnB,MAAAuB,KAAA,YAAA,KACApC,GAAA,UAAA,SAAAC,GACA+B,EAAAK,cAAA,QAAApC,EAAAqC,OAAAC,SACAP,EAAAnB,MAAAuB,KAAA,YAAA,KAGA9B,KAAAO,MAAAb,GAAA,SAAA,SAAAC,GACA+B,EAAAK,cAAA,SAAApC,EAAAqC,OAAAE,WAIA9B,SAAAC,UAAA0B,cAAA,SAAAC,EAAAG,GACA,OAAAH,GACA,IAAA,QACAhC,KAAAO,MAAAN,IAAAD,KAAAoC,cAAAD,GACA,MAEA,KAAA,SACAnC,KAAA2B,OAAAU,UAAArC,KAAAsC,cAAAH,GACA,MAEA,SACAI,QAAAC,IAAA,kBAAAR,EAAA,0BAKA7B,OAAAW,QAAA2B,KAAA,YACA,GAAArC,WAEAE","file":"backend.js","sourcesContent":["\"use strict\";\n(function($) {\n\t$('#country_flag', '#addtag, #edittag').on('change', function(e) {\n\t\tvar url = location.origin + '/content/themes/inlar/assets/images/flags',\n\t\t\tcountry = $(this).val();\n\n\t\t$('#flag_preview').attr('src', url + '/' + country + '.png');\n\t});\n})(jQuery);\n","\"use strict\";\n\nmaputils.prototype.init_admin = function() {\n\tthis.input = jQuery('#ptf_coords');\n\n\t// Bail if we are not on the right page\n\tif (!this.input.length)\n\t\treturn;\n\n\tthis.center = this.get_coords();\n\n\t// Set up the base layer\n\tthis.baselayer = L.tileLayer(window.mapconfig.template.all, {\n\t\tattribution: window.mapconfig.attribution,\n\t\tsubdomains: 'abcd',\n\t\tmaxZoom: 19,\n\t\tminZoom: 4\n\t});\n\n\t// Set up the map and add the baselayer\n\tthis.map = L.map('map', {\n\t\tlayers: [this.baselayer],\n\t\tscrollWheelZoom: true,\n\t\tcenter: this.center,\n\t\tzoom: 4,\n\t});\n\n\tvar _this = this;\n\n\t// Add the contact marker\n\tthis.marker = L.marker(this.center, {\n\t\tdraggable: true,\n\t}).addTo(this.map).on('movestart', function(e) {\n\t\t_this.input.prop('disabled', true);\n\t}).on('moveend', function(e) {\n\t\t_this.update_coords('input', e.target._latlng);\n\t\t_this.input.prop('disabled', false);\n\t});\n\n\tthis.input.on('change', function(e) {\n\t\t_this.update_coords('marker', e.target.value);\n\t});\n}\n\nmaputils.prototype.update_coords = function(target, coords) {\n\tswitch(target) {\n\t\tcase 'input':\n\t\t\tthis.input.val(this.latlng_to_str(coords));\n\t\t\tbreak;\n\n\t\tcase 'marker':\n\t\t\tthis.marker.setLatLng(this.str_to_latlng(coords));\n\t\t\tbreak;\n\n\t\tdefault:\n\t\t\tconsole.log('Invalid target ' + target + ' for update_coords()');\n\t\t\tbreak;\n\t}\n}\n\njQuery(window).load(function() {\n\tvar mu = new maputils();\n\n\tmu.init_admin();\n});\n"]}